<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

    <!-- <form class = "submit" method="post" action="http://localhost:8000/upload"enctype="multipart/form-data">
        <label for="file">File</label>
        <input id="file" name="file" type="file" />
        <button>Upload</button>
      </form> -->
    <form class = "submit">
        <label for="file">Post</label>
        <input id="file" name="file" type="file"/>
        <button type="submit">Upload</button>
    </form>
    <input type="number" id="quantity" name="quantity" min="1" max="10000"/>

    <form class = "submit2">
        <label for="file">Put</label>
        <input id="file" name="file" type="file"/>
        <button type="submit">Upload</button>
    </form>

    <form class = "submit3">
        <label for="quantity">Delete</label>  
        <button type="submit">Upload</button>
    </form>
    <form class = "submit4">
        <label for="quantity">Get</label>  
        <button type="submit">Retrieve</button>
    </form>

      <script>
            $(document).ready(function(){

                $('.submit').unbind('submit').submit(function (e) {
                    
                    $.ajax({
                        type: "POST",
                        url: "http://localhost:8000/upload",
                        crossDomain: true,
                        data:  new FormData(this),
                        dataType: "json",
                        contentType: "multipart/form-data",
                        processData: false,
                        // contentType: false,
                        headers: {
                        "Accept": "application/json"
                        }
                    })
                    .done(function (data) {
                        alert("Post");
                        $('input[name=title]').val('');
                    });
                    e.preventDefault(); // when method is called, the default action of the event will not be triggered.
                                        // meand that clicked submit button will not take the browser to a new URL.
                });
                

                $('.submit2').unbind('submit').submit(function (e) {
                    $.ajax({
                        type: "PUT",
                        url: "http://localhost:8000/update/"+($('#quantity').val()),
                        crossDomain: true,
                        data: ((new FormData(this))),
                        dataType: "json",
                        contentType: "multipart/form-data",
                        processData: false,
                        headers: {
                        "Accept": "application/json"
                        }
                    })
                    .done(function (data) {
                        alert("err");
                        $('input[name=title]').val('');
                    });
                    e.preventDefault(); // when method is called, the default action of the event will not be triggered.
                                    // meand that clicked submit button will not take the browser to a new URL.
                });


                $('.submit3').unbind('submit').submit(function (e) {

                    var port = $('input[name=quantity]').val();
                    var myUrl = "http://localhost:8000/delete/"+port;

                    $.ajax({
                        type: "DELETE",
                        url: myUrl,
                    })
                    .done(function (data) {
                        alert("Deleted WebPage on: "+port);
                        $('input[name=title]').val('');
                    });
                    e.preventDefault(); // when method is called, the default action of the event will not be triggered.
                                        // meand that clicked submit button will not take the browser to a new URL.
                });
                $('.submit4').unbind('submit').submit(function (e) {

                    var port = $('input[name=quantity]').val();
                    var myUrl = "http://localhost:8000/url";

                    $.ajax({
                    type: "GET",
                    url: myUrl,
                    })
                    .done(function (data) {
                          alert("Get: ");
                         $('input[name=title]').val('');
                         console.log(data);
                    });
                    e.preventDefault(); // when method is called, the default action of the event will not be triggered.
                                    // meand that clicked submit button will not take the browser to a new URL.
                    });

            });

      </script>
</body>
</html>